sim = {
  maxTotalInstrs = 900000000000L;
  phaseLength = 10000;
  schedQuantum = 50;
  gmMBytes = 16384;
  enableTLB = true;
  pinOptions = "-ifeellucky -pause_tool 0"; 
  attachDebugger = false;
  logToFile = true;
  printHierarchy = true;
  statsPhaseInterval = 200;
  outputPhaseInterval = 2000;
};
sys = {
  cores = 
  {
    skylake = 
    {
      cores = 16;
      type = "OOO";
      icache = "l1i";
      dcache = "l1d";
    };
  };
  frequency = 3200;
  lineSize = 64;
  networkFile = "";
  caches = 
  {
    l1d = 
    {
      children = "";
      isPrefetcher = false;
      size = 65536;
      banks = 1;
      caches = 16;
      type = "Simple";
      array = 
      {
        ways = 8;
        type = "SetAssoc";
        hash = "None";
      };
      repl = 
      {
        type = "LRU";
      };
      latency = 1;
      nonInclusiveHack = false;
    };
    l1i = 
    {
      children = "";
      isPrefetcher = false;
      size = 32768;
      banks = 1;
      caches = 16;
      type = "Simple";
      array = 
      {
        ways = 4;
        type = "SetAssoc";
        hash = "None";
      };
      repl = 
      {
        type = "LRU";
      };
      latency = 1;
      nonInclusiveHack = false;
    };
    l2 = 
    {
      children = "l1i|l1d";
      isPrefetcher = false;
      size = 1048576;
      banks = 1;
      caches = 16;
      type = "Simple";
      array = 
      {
        ways = 8;
        type = "SetAssoc";
        hash = "None";
      };
      repl = 
      {
        type = "LRU";
      };
      latency = 9;
      nonInclusiveHack = false;
    };
    l3 = 
    {
      children = "l2";
      isPrefetcher = false;
      size = 16777216;
      banks = 16;
      caches = 1;
      type = "Timing";
      array = 
      {
        ways = 16;
        type = "SetAssoc";
        hash = "H3";
      };
      repl = 
      {
        type = "LRU";
      };
      latency = 38;
      nonInclusiveHack = false;
    };
  };
  mem = {
    splitAddrs = false;
    enableTrace = false;
    mapGranu = 64;
    controllers = 1;
    type = "DramCache";
    # cache_scheme= AlloyCache, BansheeCache, UnisonCache, CacheOnly, CopyCache, NoCache, NDC
    cache_scheme = "CHAMO";
    bwBalance = false;
    ext_dram = {
      type = "DDR";
      configIni = "tests/configs/dramsim3-cxl-DDR4_2Gb_x8_3200.ini";
      outputDir = "output/mem";
      traceName = ".";
      latency = 256; # DDR4-3200: 0.3125ns/cycle, 80ns = 256 cycles
      size = 16384;
      # size = 32768;
      # type = "DDR";
      # ranksPerChannel = 4;
      # banksPerRank = 8;
    };
    mcdram = {
      type = "DDR";
      configIni = "tests/configs/dramsim3-dram-DDR4_1Gb_x8_3200.ini";
      outputDir = "output/mem";
      traceName = ".";
      latency = 20; # CHA<->MC
      cache_granularity = 64;
      size = 4096;
      mcdramPerMC = 1;
      num_ways = 1;
      sampleRate = 1.0;
      footprint_size = 512;
      # placementPolicy= LRU, FBR 
      placementPolicy = "LRU";
      # index_mask_upper = 0x0;
      # index_mask_lower = 0x0;
      index_mask_upper = 0x0;
      index_mask_lower = 0x1fffff;
      # index_mask_upper = 0x0;
      # index_mask_lower = 0x3ffffe;
      # index_mask_upper = 0x0;
      # index_mask_lower = 0x7ffffc;
      # index_mask_upper = 0x0;
      # index_mask_lower = 0xfffff8;
      # index_mask_upper = 0x0;
      # index_mask_lower = 0x1fffff0;
    };
  };
};
# process0 = { command = "ls -alh --color /home/"; };
process0 = {
  command = "/data/benchmarks/gapbs-1.5/cc -f /data/benchmarks/gapbs-1.5/benchmark/graphs/web.sg -n16"; 
  startFastForwarded = true;
  # syncedFastForward = "Always";
  ffiPoints ="2000000000 50000000000 1000";
  env = "OMP_NUM_THREADS=1";
};